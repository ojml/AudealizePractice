<!DOCTYPE html>
<html>
<head>
	<script src="C:/Users/Olivia/Desktop/JavaScript Practice/bufferloader.js"></script>
<script>
var context;
var bufferLoader;
var bufferList;
var source;
function fileSelected(filelist){
	window.AudioContext = window.AudioContext || window.webkitAudioContext;
	context = new AudioContext();
	file = filelist.files[0];
	url = URL.createObjectURL(file);
	AUDIOFILE = [url];
	bufferLoader = new BufferLoader( //not defined?
		context,
		AUDIOFILE,
		finishedLoading
		);
	bufferLoader.load();
	function finishedLoading(bufferList){ //why SO slow to start 							 				playing?
		var source = context.createBufferSource();
		source.buffer = bufferList[0];
		source.connect(context.destination);
		source.start(0)
		// BUFFERS = bufferList.slice(0);
	}
// document.getElementById("audiosource").setAttribute("src", filelist.files[0].name);
}

//load file with xmlhhtprequest instead of setting src
function playMusic(){ //how to play audio here?
		// var source = context.createBufferSource();
		// source.buffer = bufferList[0];
		// source.connect(context.destination);
		// source.start(0)
}

</script> 
</head>

<body>


<input id="fileinput" type="file" accept="audio/*" onchange="fileSelected(this)"></input>


<p>
</p>
<button type="button" class="btn" id="playAudio" onclick="playMusic();" >Play</button>


<p>
</p>


<audio controls="controls" id="audiosource">
</audio>
</p>



</body>
</html>
